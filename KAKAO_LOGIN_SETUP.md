# 카카오 로그인 설정 가이드

LinQ 앱에서 카카오 로그인을 사용하기 위한 설정 방법을 안내합니다.

## 1. 카카오 개발자 계정 및 앱 등록

### 1.1 카카오 개발자 콘솔 접속
1. [카카오 개발자 콘솔](https://developers.kakao.com)에 접속합니다.
2. 카카오 계정으로 로그인합니다.

### 1.2 애플리케이션 추가
1. "내 애플리케이션" 메뉴에서 "애플리케이션 추가하기"를 클릭합니다.
2. 앱 이름: `LinQ`
3. 사업자명: 본인 이름 또는 회사명
4. 애플리케이션을 생성합니다.

## 2. 앱 키 확인 및 설정

### 2.1 앱 키 확인
1. 생성된 애플리케이션을 클릭합니다.
2. "요약 정보" 탭에서 **JavaScript 키**를 복사합니다.

### 2.2 환경 변수 설정
1. 프로젝트 루트에 `.env` 파일을 생성합니다.
2. 다음과 같이 카카오 앱 키를 설정합니다:

```env
EXPO_BUILD_KAKAO_APP_KEY=your_javascript_key_here
```

**중요**: `your_javascript_key_here` 부분을 실제 JavaScript 키로 교체하세요.

## 3. 플랫폼 설정

### 3.1 iOS 설정
1. 카카오 개발자 콘솔에서 "플랫폼" 탭을 클릭합니다.
2. "iOS 플랫폼 등록"을 클릭합니다.
3. 번들 ID: `com.linq.app`
4. 저장합니다.

### 3.2 Android 설정
1. "플랫폼" 탭에서 "Android 플랫폼 등록"을 클릭합니다.
2. 패키지명: `com.linq.app`
3. 키 해시는 개발/배포 시 추가로 설정 필요합니다.

## 4. 카카오 로그인 활성화

### 4.1 카카오 로그인 설정
1. "제품 설정" > "카카오 로그인"을 클릭합니다.
2. "활성화 설정"을 ON으로 변경합니다.

### 4.2 Redirect URI 설정
1. "Redirect URI"에 다음을 추가합니다:
   - `exp://localhost:19000/--/oauth` (Expo Go 개발용)
   - `linq://oauth` (스탠드얼론 앱용)
   - `http://localhost:19006/oauth` (웹 테스트용)

### 4.3 동의항목 설정
1. "제품 설정" > "카카오 로그인" > "동의항목"을 클릭합니다.
2. 다음 항목들을 설정합니다:
   - **닉네임**: 필수 동의
   - **프로필 사진**: 선택 동의
   - **카카오계정(이메일)**: 선택 동의

## 5. 앱 실행 및 테스트

### 5.1 개발 서버 실행
```bash
npm start
```

### 5.2 테스트
1. Expo Go 앱 또는 개발 빌드에서 앱을 실행합니다.
2. 로그인 화면에서 "카카오톡으로 로그인" 버튼을 클릭합니다.
3. 카카오 로그인 페이지가 열리면 로그인을 진행합니다.
4. 동의 화면에서 필요한 권한에 동의합니다.
5. 로그인이 성공하면 메인 화면으로 이동합니다.

## 6. 문제 해결

### 6.1 일반적인 문제들

**문제**: "카카오 앱 키가 설정되지 않았습니다" 오류
- **해결**: `.env` 파일에 `EXPO_BUILD_KAKAO_APP_KEY`가 올바르게 설정되었는지 확인
- 앱을 재시작하여 환경 변수를 다시 로드

**문제**: "Invalid redirect URI" 오류
- **해결**: 카카오 개발자 콘솔에서 Redirect URI가 올바르게 설정되었는지 확인
- 개발 시: `exp://localhost:19000/--/oauth`
- 배포 시: `linq://oauth`

**문제**: 로그인 후 앱으로 돌아오지 않음
- **해결**: app.json의 scheme 설정과 카카오 콘솔의 Redirect URI가 일치하는지 확인
- iOS의 경우 Info.plist의 URL Scheme 설정 확인

### 6.2 디버깅 방법
1. 개발자 도구의 콘솔에서 로그를 확인합니다.
2. 네트워크 탭에서 API 호출 상태를 확인합니다.
3. 카카오 개발자 콘솔의 "통계" 탭에서 API 호출 현황을 확인합니다.

## 7. 추가 정보

### 7.1 카카오 로그인 플로우
1. 사용자가 "카카오톡으로 로그인" 버튼 클릭
2. 카카오 인증 서버로 리다이렉트
3. 사용자 로그인 및 동의
4. 인증 코드 반환
5. 인증 코드로 액세스 토큰 교환
6. 액세스 토큰으로 사용자 정보 조회
7. 앱 내 로그인 처리 완료

### 7.2 보안 고려사항
- JavaScript 키는 클라이언트에서 사용되므로 공개되어도 안전합니다.
- 서버 측에서는 별도의 Admin 키를 사용해야 합니다.
- 사용자 정보는 최소한으로 요청하고, 필요한 경우에만 저장합니다.

### 7.3 관련 문서
- [카카오 로그인 개발가이드](https://developers.kakao.com/docs/latest/ko/kakaologin/common)
- [Expo AuthSession 문서](https://docs.expo.dev/guides/authentication/#authsession)
- [React Native 카카오 로그인](https://github.com/react-native-kakao/react-native-kakao-login)

---

문제가 발생하면 위의 문제 해결 섹션을 참고하거나, 카카오 개발자 포럼에서 도움을 받으실 수 있습니다.
